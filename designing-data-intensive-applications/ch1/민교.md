# 새롭게 알게된 점

많은 애플리케이션은 계산 중심(compute-intensive)과는 다르게 데이터 중심(data-intensive)적이다.

애플리케이션이 단일 도구로는 더 이상 데이터 처리와 저장 모두를 만족시킬 수 없는 과도하고 광범위한 요구사항을 갖고 있다. 대신 작업(work)은 단일 도구에서 효율적으로 수행할 수 잇는 테스트(task)로 나누고 다양한 도구들은 애플리케이션 코드를 이용해 서로 연결한다.

## 신뢰성

결함(fault)은 장애(failure)과 동일하지 않다. 일반적으로 결함은 사양에서 벗어난 시스템의 한 구성 요소로 정의되지만, 장애는 사용자에게 필요한 서비스를 제공하지 못하고 시스템 전체가 멈춘 경우다. 결함 확률을 0으로 줄이는 것은 불가능하나, 결함으로 인해 장애가 발생하지 않게끔 내결함성(fault-tolerant) 구조를 설계하는 것이 좋다.

보안 문제와 같이 예방책이 해결책보다 좋은 경우도 존재한다.

### 하드웨어 결함

대부분의 중복(redundancy)를 이용해 해결. 하지만 데이터 양과 애플리케이션의 계산 요구가 늘어나면서 다수 장비를 사용하게 되었고, 이는 하드웨어 결함율 증가로 이어짐.

소프트웨어 내결함성 기술을 사용하거나 하드웨어 중복성을 추가해 전체 장비 손실을 견딜 수 있는 시스템으로 점점 옮겨가고 있다.

### 소프트웨어 오류

리눅스 커널 버그 같이 예쌍하기 어렵고, 특정 상황에 의해 발생하기 전까지 오랫동안 나타나지 않는다. 이러한 문제점들에는 신속한 해결책들이 없다,

빈틈없는 테스트, 프로세스 격리, 죽은 프로세스의 재시작 허용, 모니터링, 분석하기 같은 것들이 도움을 줄 수는 있다.

### 인적 오류

대규모 인터넷 서비스에 대한 연구에 따르면 운영자의 설정 오류가 중단의 주요 원인이였다. 사람은 못미둬우니 시스템이 신뢰성을 갖춰야 한다.

- 오류의 가능성을 최소화하는 방향으로 시스템 설계. 잘 설계된 추상화, API, 관리 인터페이스 사용등

- 샌드박스(sandbox) 환경을 제공하라

- 단위테스트부터 전체 시스템 통합 테스트, 수동 테스트까지 철저하게 테스트

- 인적 오류를 빠르고 쉽게 복구할 수 있게 하라

- 명확한 모니터링 대책을 마련하라

- 조작 교육과 실습을 시행하라.

### 신뢰성의 중요성

결함이 발생해도 시스템이 올바르게 동작한다는 의미. 일상적인 애플리케이션, 중요하지 않는 애플리케이션에서도 안정적으로 작동해야한다.

증명되지 않은 시장을 위해 시제품 개발하는 비용이나 매우 작은 이익률의 서비스를 운영하는 비용을 줄이려 신뢰성을 희생해야하는 상황이 있다. 하지만 이 경우에는 비용을 줄여야하는 시점을 매우 잘 알고 있어야 한다.

## 확장성

부하가 증가해도 좋은 성능을 유지하기 위한 전략을 의미. 증가한 부하에 대처하는 시스템 능력을 설명하는데 사용하는 용어. 시스템이 특정 방식으로 커지면 이에 대처하기 위한 선택은 무엇인가? 추가 부하를 다루기 위해 계산 자원을 어떻게 투입할까? 같은 질문을 고려한다는 의미

### 부하 기술하기

부하는 부하 매개변수(load parameter)라 부르는 숫자로 나타낼 수 있다. ex) 웹 서버의 초당 요청 수, 데이터베이스의 읽기 대 쓰기 비율, 캐시 적중률 등등

부하 매개변수는 확장성을 논의할 때, 중요하므로 어떤 값들을 정하는지가 중요.

트위터의 홈 타임라인

### 성능 기술하기

응답 시간 백분위

### 부하 대응 접근 방식

용량 확장(scaling up)

규모 확장(scaling out)

특정 애플리케이션에 적합한 확장성을 갖춘 아키텍처는 주요 동작이 무엇이고 잘 하지 않는 동작이 무엇인지에 대한 가정(부하 매개변수)을 바탕으로 구축한다.

스타트업 초기단계나 검증되지 않은 제품의 경우, 미래를 가정한 부하에 대비해 확장하기 보다는 빠르게 반복해서 제품 기능을 개선하는 작업이 더 중요,

## 유지보수성

### 운영성(operability):운영의 편리함 만들기

운영팀이 원활하게 운영할 수 있도록 쉽게 만들어라. 좋은 운영성이란 동일하게 반복되는 테스트를 쉽게 수행하게끔 만들어 운영팀이 고부가가치 활동에 노력을 집중한다는 의미

자동화할 수 있는 부분은 자동화를 한다.

데이터 시스템은 동일 반복 테스크를 쉽게하기 위해 아래와 같은 일을 할 수있다.

- 좋은 모니터링으로 런타임 동작과 시스템 내부에 대한 가시성 제공

- 표준 도구를 이용해 자동화와 통합을 위한 우수한 지원을 제공

- 개별 장비 의존성을 회피, 유지보수를 위해 장비를 내리더라도 시스템 전체에 영향을 주지 않고 계속해서 운영 가능해야함.

- 좋은 문서와 이해하기 쉬운 운영 모델 제공

- 만족할 만한 기본 동작을 제공하고, 필요할 때 기본값을 다시 정의할 수 있는 자유를 관리자에게 부여

- 적절하게 자기 회복(self-healing)이 가능할 뿐 아니라 필요에 따라 관리자가 시스템 상태를 수동으로 제어할 수 있게 함

- 예측 가능하게 동작하고 예기치 않은 상황을 최소화함

### 단순성(simplicity):복잡도 관리

시스템을 단순하게 만드는 일이 기능을 줄인다는 의미는 아니다.

우발적 복잡도(accidental complexity)를 줄인다는 뜻.

우발적 복잡도를 제거하기 위한 최상의 도구는 추상화.

### 발전성(evolvability):변화를 쉽게 만들기

요구사항은 끊임없이 변한다.(비즈니스 우선순위 변경, 사용자의 새로운 기능 요청, 법적 또는 규제 요구사항의 변경, 시스템 성장으로 인한 아키텍쳐 변화 등)

조직 프로세스 측면에서 애자일(agile) 작업 패턴은 변화에 적응하기 위한 프레임 워크를 제공한다. (TDD, refactoring)

# 어려웠거나 이해하지 못한 점

카오스 몽키

# 추가 내용

샌드박스와 프로덕션에 데이터 양 차이에 따른 장애 연결들은 어디서 어떻게 확인해볼 수 있는것인가

교육의 방식(강의식 vs 문서화) 문서화의 경우, 그 비용까지

트위터의 부하 방식(혼합)의 경우, 복잡도는 올라가는 편, trade off 관리

문서화 -> 현행화는 어떻게 유지할건가
